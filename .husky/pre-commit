#!/usr/bin/env sh

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.java$' || true)

if [ -z "$STAGED_FILES" ]; then
  echo "âœ… í¬ë§·íŒ…í•  Java íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤"
  exit 0
fi

echo "ğŸ¨ staged íŒŒì¼ í¬ë§·íŒ… ì‹œì‘..."

./gradlew spotlessApply

if [ $? -ne 0 ]; then
  echo "âŒ ì½”ë“œ í¬ë§·íŒ… ì‹¤íŒ¨"
  exit 1
fi

for FILE in $STAGED_FILES; do
  if [ -f "$FILE" ]; then
    git add "$FILE"
  fi
done

echo "âœ… ì½”ë“œ í¬ë§·íŒ… ì™„ë£Œ"
